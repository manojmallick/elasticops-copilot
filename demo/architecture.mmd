graph TB
    subgraph "Data Sources"
        A[Application Logs<br/>logs-app]
        B[KB Articles<br/>kb-articles]
        C[Resolutions<br/>resolutions]
        D[Tickets<br/>tickets]
    end
    
    subgraph "Detection & Processing"
        E[ES|QL Spike<br/>Detector]
        F[Incident<br/>Creation]
        G[Embedding<br/>Generator]
        DemoSpike[Demo Spike<br/>Generator]
    end
    
    subgraph "Multi-Agent Workflows"
        H[Ticket Triage<br/>Agent]
        I[Incident<br/>Response Agent]
    end
    
    subgraph "Search & Retrieval"
        J[RRF Hybrid Search<br/>BM25 + kNN + Rank Fusion]
        K[Deduplication<br/>kNN]
        L[Resolution<br/>Retrieval]
        Explain[Search Explainability<br/>Component Scores & Ranks]
    end
    
    subgraph "Observability"
        M[ops-runs<br/>Timeline]
        N[ops-metrics<br/>KPIs]
        O[Dashboard<br/>UI]
    end
    
    DemoSpike -->|Bulk Insert Errors| A
    A -->|ES|QL Query| E
    E -->|Error Spike| F
    F -->|Create| D
    F --> I
    
    D --> G
    B --> G
    C --> G
    
    G --> J
    G --> K
    G --> L
    
    J --> Explain
    
    D --> H
    J --> H
    K --> H
    L --> H
    
    H -->|Update + Confidence| D
    H -->|Record| M
    H -->|Write| N
    
    I -->|Record| M
    I -->|Write| N
    
    M --> O
    N --> O
    
    style A fill:#e3f2fd
    style B fill:#e3f2fd
    style C fill:#e3f2fd
    style D fill:#e3f2fd
    style E fill:#fff3e0
    style F fill:#fff3e0
    style G fill:#fff3e0
    style DemoSpike fill:#fff3e0
    style H fill:#e8f5e9
    style I fill:#e8f5e9
    style J fill:#f3e5f5
    style K fill:#f3e5f5
    style L fill:#f3e5f5
    style Explain fill:#f3e5f5
    style M fill:#fce4ec
    style N fill:#fce4ec
    style O fill:#fce4ec
